<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <title>Swiper demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
 <!-- Demo styles -->
<style>
  html,
  body {
    position: relative;
    height: 100%;
    background: #eee;
    font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
    font-size: 14px;
    color: #000;
    margin: 0;
    padding: 0;
  }
    .fa-solid,
  fa-users {
    color: #ea9999 !important;
  }
  .text-info {
    color: #ea9999 !important;
    padding-top: 3%;
    padding-left: 3%;
  }
  .btn-info {
    color: white;
    background-color: #ea9999;
    border-color: #ff9494;
  }
  .btn-info:hover {
    background-color: #fb6161;
    border-color: #ff9494;
  }
  .btn-info:active {
    background-color: #fb6161 !important;
    border-color: #ff9494 !important;
  }
  .Guestselection {
    color: white;
    background-color: #ea9999;
    border-color: #ff9494;
    width: 100px;
    margin: auto;
    font-size: 16px;
  }
  .Guestselection:hover {
    background-color: #fb6161;
    border-color: #ff9494;
  }
  .Guestselection:active {
    background-color: #fb6161 !important;
    border-color: #ff9494 !important;
  }
    .card-block {
    padding: 20px;
  }
  .card-title {
    text-align: center;
  }
  /* Style for the form container */
    .read-only-field {
    background-color: #f0f0f0 !important; /* Add the desired background color and !important */
    cursor: not-allowed;
  }
  #form-container {
    margin: 20px;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    max-width: 800px;
    margin: 0 auto;
  }
  #form-container > * {
    flex-basis: 100%;
  }
  #form-container input,
  #form-container select,
  #form-container textarea {
    width: 100%;
    padding: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
    background-color: #fff;
  }
  /* Style for the labels */
  #form-container label {
    display: block;
    margin-bottom: 10px;
    font-weight: bold;
  }
  /* Style for the "Book!" button */
  #form-container button {
    margin-top: 10px;
    padding: 8px 16px;
    border: none;
    border-radius: 3px;
    background-color: #ea9999;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
  }
  #form-container button:last-child {
    margin-top: 0;
    margin-left: auto;
    margin-right: auto;
    display: block;
  }
  .accept-container {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    margin-right: 70px;
  }
  .accept-container label {
    margin-right: 5px;
  }

  .required-label::after {
    content: "*";
    color: red;
  }
  .required-label::after {
  content: '*';
  color: red;
  margin-left: 4px;
}


  .separator {
    border: none;
    border-top: 1px solid #ccc;
    margin: 20px 0;
  }
  .error-container {
    margin-top: 10px;
    padding: 10px;
    color: #ff0000;
  }
  .error-message {
    margin-bottom: 5px;
  }
  
  @keyframes ldio-5pc9ti1scmm {
  0% { opacity: 1 }
  100% { opacity: 0 }
}
.ldio-5pc9ti1scmm div {
  left: 94px;
  top: 48px;
  position: absolute;
  animation: ldio-5pc9ti1scmm linear 1s infinite;
  background: #fe718d;
  width: 12px;
  height: 24px;
  border-radius: 6px / 12px;
  transform-origin: 6px 52px;
}.ldio-5pc9ti1scmm div:nth-child(1) {
  transform: rotate(0deg);
  animation-delay: -0.9166666666666666s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(2) {
  transform: rotate(30deg);
  animation-delay: -0.8333333333333334s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(3) {
  transform: rotate(60deg);
  animation-delay: -0.75s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(4) {
  transform: rotate(90deg);
  animation-delay: -0.6666666666666666s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(5) {
  transform: rotate(120deg);
  animation-delay: -0.5833333333333334s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(6) {
  transform: rotate(150deg);
  animation-delay: -0.5s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(7) {
  transform: rotate(180deg);
  animation-delay: -0.4166666666666667s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(8) {
  transform: rotate(210deg);
  animation-delay: -0.3333333333333333s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(9) {
  transform: rotate(240deg);
  animation-delay: -0.25s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(10) {
  transform: rotate(270deg);
  animation-delay: -0.16666666666666666s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(11) {
  transform: rotate(300deg);
  animation-delay: -0.08333333333333333s;
  background: #fe718d;
}.ldio-5pc9ti1scmm div:nth-child(12) {
  transform: rotate(330deg);
  animation-delay: 0s;
  background: #fe718d;
}
.loadingio-spinner-spinner-7646pt8rie {
  width: 200px;
  height: 200px;
  display: inline-block;
  overflow: hidden;
  background: rgba(NaN, NaN, NaN, 0);
}
.ldio-5pc9ti1scmm {
  width: 100%;
  height: 100%;
  position: relative;
  transform: translateZ(0) scale(1);
  backface-visibility: hidden;
  transform-origin: 0 0; /* see note above */
}
.ldio-5pc9ti1scmm div { box-sizing: content-box; }
#loading {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
}

#loading p {
  margin-top: 10px;
  color: #333;
  font-size: 14px;
  opacity: 0; /* Set initial opacity to 0 */
  animation: fadeAnimation 2s infinite; /* Apply the animation */
}

@keyframes fadeAnimation {
  0% {
    opacity: 0; /* Start with fade out */
  }
  50% {
    opacity: 1; /* Fade in */
  }
  100% {
    opacity: 0; /* Fade out */
  }
}
  
      .fa-arrow-left:before {
        content: "<" !important;
    }
    .fa-arrow-right:before {
        content: ">" !important;
    }
    .flaticon2-left-arrow:before {
        content: "<";
    }
    .flaticon2-right-arrow:before {
        content: ">";
    }
</style>
</head>
<body>
  
  <!-- Swiper -->
  <div class="swiper mySwiper">
    <!-- Your card div content here -->
<div class="card-block">
<h4 class="card-title text-info">Domek 1</h4>
<ul class="list-inline text-sm mb-4" align="center">
<li class="list-inline-item me-3"><i class="fa-solid fa-users"></i> 6 Os.</li>
<li class="list-inline-item me-3"><i class="fa-solid fa-shower"></i> 1 Łazienka</li>
<li class="list-inline-item me-3"><i class="fa-solid fa-bed"></i> 4 Łóżka</li>
<li class="list-inline-item me-3"><i class="fa-solid fa-square-parking"></i> 1 Park.</li>
<li class="list-inline-item me-3"><i class="fa-solid fa-temperature-arrow-down"></i> Klima</li>
<li class="list-inline-item me-3"><i class="fa-solid fa-wifi"></i> WiFi</li>
</ul>
<p align="center"><a href="https://www.napanskiejgorze.com/nasze-domki/domek-1" class="btn btn-info">Więcej szczegółów</a></p>
</div>
    <!-- Form container -->
    <div id="form-container">
      


      <!-- Form fields will be added here dynamically -->
    </div>
    
  </div>
  
  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<div id="loading" class="loadingio-spinner-spinner-7646pt8rie"><p>Może to potrwać do 15 sekund...</p><div class="ldio-5pc9ti1scmm">
<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
</div>
<script>
 $(document).ready(function () {
  // Pricing logic
  var specialDayPrices = {
    '12-25': 400,  // Christmas: December 25
    '12-26': 400,  // Christmas: December 26
    '12-27': 400,  // Christmas: December 27
  };

  var normalDayPrice = 360;
  var additionalPrice = 0;

  function calculateTotalPrice(startDate, endDate, numberOfGuests) {
    var oneNightPrice = normalDayPrice;
    var startDateFormatted = startDate.format('MM-DD');

    if (startDateFormatted in specialDayPrices) {
      oneNightPrice = specialDayPrices[startDateFormatted];
    }

    if (numberOfGuests === 3) {
      additionalPrice = 20;
    } else if (numberOfGuests === 4) {
      additionalPrice = 35;
    } else if (numberOfGuests >= 5) {
      additionalPrice = 70;
    }

    var numberOfNights = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
    var totalPrice = (oneNightPrice * numberOfNights) + (additionalPrice * numberOfNights);
    return totalPrice;
  }

  var checkin;
  var checkout;

  function updateForm() {
    var formContainer = $('#form-container');
    // Clear existing form fields
    formContainer.empty();
        var fromLabel = $('<label>').text('Check-in:');
var fromInput = $('<input>').attr('type', 'text').attr('name', 'from').addClass('read-only-field').attr('readonly', true);
formContainer.append(fromLabel).append(fromInput);

var toLabel = $('<label>').text('Check-out:');
var toInput = $('<input>').attr('type', 'text').attr('name', 'to').addClass('read-only-field').attr('readonly', true);
formContainer.append(toLabel).append(toInput);

var priceLabel = $('<label>').text('Cena: ');
var priceInput = $('<input>').attr('type', 'text').attr('name', 'price').addClass('read-only-field').attr('readonly', true);
formContainer.append(priceLabel).append(priceInput);

    var numberOfGuestsLabel = $('<label>').text('Liczba gości:').addClass('required-label');
    var numberOfGuestsSelect = $('<select>').attr('name', 'numberOfGuests').prop('required', true);
    numberOfGuestsSelect.append('<option value="1">1 osoba</option>');
    numberOfGuestsSelect.append('<option value="2">2 osoby</option>');
    numberOfGuestsSelect.append('<option value="3">3 osoby</option>');
    numberOfGuestsSelect.append('<option value="4">4 osoby</option>');
    numberOfGuestsSelect.append('<option value="5">5 osób</option>');
    numberOfGuestsSelect.append('<option value="6">6 osób</option>');
    formContainer.append(numberOfGuestsLabel).append(numberOfGuestsSelect);

    var nameLabel = $('<label>').text('Imię i nazwisko:').addClass('required-label');
    var nameInput = $('<input>').attr('type', 'text').attr('name', 'name').prop('required', true);
    formContainer.append(nameLabel).append(nameInput);

    var addressLabel = $('<label>').text('Adres:').addClass('required-label');
    var addressInput = $('<input>').attr('type', 'text').attr('name', 'address').prop('required', true);
    formContainer.append(addressLabel).append(addressInput);

    var emailLabel = $('<label>').text('Email:').addClass('required-label');
    var emailInput = $('<input>').attr('type', 'email').attr('name', 'email').prop('required', true);
    formContainer.append(emailLabel).append(emailInput);

    var phoneLabel = $('<label>').text('Nr kontaktowy:').addClass('required-label');
    var phoneInput = $('<input>').attr('type', 'tel').attr('name', 'phone').prop('required', true);
    formContainer.append(phoneLabel).append(phoneInput);

    var commentsLabel = $('<label>').text('Uwagi: ');
    var commentsInput = $('<textarea>').attr('name', 'comments');
    formContainer.append(commentsLabel).append(commentsInput);

    var acceptContainer = $('<div>').addClass('accept-container');
    var acceptLabel = $('<label>').text('Zapoznałem się z regulaminem obiektu:').addClass('required-label');
    var acceptInput = $('<input>').attr('type', 'checkbox').attr('name', 'accept');
    var termsLink = $('<a>').attr('href', 'https://www.napanskiejgorze.com/regulamin').attr('target', '_blank').text('Regulamin obiektu');

    acceptContainer.append(acceptLabel).append(acceptInput).append(termsLink);
    formContainer.append(acceptContainer);
    // Add a separator
    var separator = $('<hr>').addClass('separator');
    formContainer.append(separator);
    // Create the submit button
    var submitButton = $('<button>').attr('type', 'submit').text('Submit');
    formContainer.append(submitButton);

    // Get the URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    checkin = urlParams.get('checkin');
    checkout = urlParams.get('checkout');

    // Set the values of the fromInput and toInput fields
    fromInput.val(checkin);
    toInput.val(checkout);

    // Calculate and set the initial price
    var numberOfGuests = parseInt(numberOfGuestsSelect.val());
    var startDate = moment(checkin);
    var endDate = moment(checkout);
    var totalPrice = calculateTotalPrice(startDate, endDate, numberOfGuests);
    priceInput.val(totalPrice);

    // Update the price when number of guests or check-in date changes
    numberOfGuestsSelect.on('change', function () {
  var numberOfGuests = parseInt($(this).val());
  var startDate = moment(checkin);
  var endDate = moment(checkout);

  // Reset additionalPrice if number of guests is changed to 1
  if (numberOfGuests === 1) {
    additionalPrice = 0;
  }

  var totalPrice = calculateTotalPrice(startDate, endDate, numberOfGuests);
  priceInput.val(totalPrice);
});

    fromInput.on('change', function () {
      var numberOfGuests = parseInt(numberOfGuestsSelect.val());
      var startDate = moment($(this).val());
      var endDate = moment(checkout);
      var totalPrice = calculateTotalPrice(startDate, endDate, numberOfGuests);
      priceInput.val(totalPrice);
    });

    toInput.on('change', function () {
      var numberOfGuests = parseInt(numberOfGuestsSelect.val());
      var startDate = moment(checkin);
      var endDate = moment($(this).val());
      var totalPrice = calculateTotalPrice(startDate, endDate, numberOfGuests);
      priceInput.val(totalPrice);
    });
  }
  
  // Call the updateForm function to generate the form
  updateForm();
});
</script>
</body>
</html>
